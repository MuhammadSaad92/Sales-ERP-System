{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'vat_tax_report.css' %}">
{% endblock %}

{% block content %}
<div class="main-content">
    <div class="report-details">
        <h2>VAT & Tax Report</h2>
        <div class="date-filter-container">
            <form class="date-filter" method="GET" action="{% url 'vat_tax_report' %}">
                <label for="fromDate">From</label>
                <input type="date" id="fromDate" name="fromDate" value="{{ from_date_str }}">
                <label for="toDate">To</label>
                <input type="date" id="toDate" name="toDate" value="{{ to_date_str }}">
                <button type="submit" class="find-btn">Find</button>
            </form>
            <form class="date-filter" method="GET" action="{% url 'vat_tax_report' %}">
                <button type="submit" class="clear-btn">Clear</button>
            </form>
        </div>
        <div class="header-row">
            <div class="company-details">
                <h2>Demo Company</h2>
                <h5>Company Demo Address</h5>
                <h5>demo@mail.com</h5>
                <h5>123456</h5>
            </div>
            <div class="report-date">
                <p>Date: {{ report_date|date:"Y-m-d" }}</p>
            </div>
        </div>
        <div class="table-wrapper">
            <table class="stock-table">
                <thead>
                    <tr>
                        <th>Transaction Type</th>
                        <th>Date</th>
                        <th>Invoice No</th>
                        <th>Customer/Supplier</th>
                        <th>VAT Amount</th>
                        <th>Discount Amount</th>
                        <th>Total VAT + Tax</th>
                    </tr>
                </thead>
                <tbody id="reportTableBody">
                    {% for item in vat_taxes %}
                    <tr class="stock-row">
                        <td>{{ item.transaction_type }}</td>
                        <td>{{ item.date|date:"Y-m-d" }}</td>
                        <td>{{ item.invoice_no }}</td>
                        <td>{{ item.party_name }}</td>
                        <td>{{ item.vat_amount|floatformat:2 }}</td>
                        <td>{{ item.tax_amount|floatformat:2 }}</td>
                        <td>{{ item.vat_tax_total|floatformat:2 }}</td>
                    </tr>
                    {% empty %}
                    <tr class="no-data">
                        <td colspan="7">No transactions in selected date range</td>
                    </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                    {% if vat_taxes %}
                    <tr class="total-row">
                        <td colspan="4" style="text-align: right; padding-right: 25px; font-weight: bold;">Total :</td>
                        <td>{{ total_vat|floatformat:2 }}</td>
                        <td>{{ total_tax|floatformat:2 }}</td>
                        <td>{{ total_vat_tax|floatformat:2 }}</td>
                    </tr>
                    {% endif %}
                </tfoot>
            </table>
        </div>
    </div>
</div>
{% endblock %}