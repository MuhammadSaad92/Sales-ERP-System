{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'purchase_detail.css' %}" />
{% endblock %}

{% block content %}
  <div class="top-buttons">
  <a href="{% url 'manage_purchase' %}" class="action-button">
    <i class="fa fa-list-alt" aria-hidden="true"></i> Manage Purchase
  </a>
  <a href="{% url 'add_purchase' %}" class="action-button">
    <i class="fa fa-plus-circle" aria-hidden="true"></i> Add Purchase
  </a>
  </div>
  <div class="main-content">
    <div class="purchase-details">
      <!-- Header -->
      <div class="header">
        <h2>Purchase Details</h2>
        <button class="print-button" onclick="window.print()">
          <i class="fa-solid fa-print"></i>
        </button>
      </div>

      <!-- Billing Information -->
      <div class="billing-section">
        <div class="billing-from">
          <p class="label">Billing From</p>
          <strong>Company Name</strong>
          <p>Company Address</p>
          <p>Mobile: 1234567</p>
          <p>Email: salesproject@mail.com</p>
          <p>Website: https://www.salesproject.com/</p>
        </div>
        <div class="billing-to">
          <p class="label">Billing To</p>
          <strong>{{ purchase.supplier.supplier_name }}</strong>
          <p>{{ purchase.supplier.address|default:"-" }}</p>
          <p>Email: {{ purchase.supplier.email|default:"-" }}</p>
          <p>Mobile: {{ purchase.supplier.mobile|default:"-" }}</p>
          <p>VAT No: {{ purchase.supplier.vat_number|default:"-" }}</p>
        </div>
      </div>

      <!-- Purchase Information -->
      <div class="purchase-info">
        <p><strong>Invoice No:</strong> {{ purchase.challan_no }}</p>
        <p><strong>Billing Date:</strong> {{ purchase.purchase_date|date:"Y-m-d" }}</p>
        <p><strong>Order Time:</strong> 12:00</p>
      </div>

      <!-- Table -->
      <table class="purchase-table">
        <thead>
          <tr>
            <th>SL.</th>
            <th>Product Name</th>
            <th>Qty</th>
            <th>Rate</th>
            <th>Discount%</th>
            <th>Dis. Value</th>
            <th>Vat %</th>
            <th>VAT Value</th>
            <th>Total Amount</th>
          </tr>
        </thead>
        <tbody>
          {% for item in purchase.items.all %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td>{{ item.product.name }}</td>
              <td>{{ item.quantity }}</td>
              <td>${{ item.rate }}</td>
              <td>{{ item.discount_percent }}%</td>
              <td>${{ item.discount_value }}</td>
              <td>{{ item.vat_percent }}%</td>
              <td>${{ item.vat_value }}</td>
              <td>${{ item.total }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>

      <!-- Summary -->
      <div class="summary">
        <p><strong>Total:</strong> ${{ purchase.grand_total }}</p>
        <p><strong>Grand Total:</strong> ${{ purchase.grand_total }}</p>
        <p><strong>Paid Amount:</strong> ${{ purchase.grand_total }}</p>
      </div>
    </div>
  </div>
{% endblock %}